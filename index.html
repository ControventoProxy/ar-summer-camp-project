<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Summer Camp 2025 AR (MindAR)</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/aframe.prod.js"></script>
    <script>
  document.addEventListener('DOMContentLoaded', function() {
    const sceneEl = document.querySelector('a-scene');
    const startButton = document.getElementById('startButton');
    const loadingOverlay = document.getElementById('loadingOverlay');

    startButton.addEventListener('click', function() {
      loadingOverlay.style.display = 'none'; // Nasconde l'overlay
      if (sceneEl.hasAttribute('mindar-image')) {
        sceneEl.components['mindar-image'].start(); // Avvia MindAR
      }
    });

    // Opzionale: Mostra l'overlay se la scena si ferma o perde il contesto
    sceneEl.addEventListener('arReady', (event) => {
      console.log("AR System ready!");
    });
    sceneEl.addEventListener('arError', (event) => {
      console.log("AR System error:", event);
      loadingOverlay.style.display = 'flex'; // Ri-mostra l'overlay in caso di errore
      loadingOverlay.querySelector('p').textContent = "Errore AR! Tocca per riprovare.";
    });
  });
</script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene mindar-image embedded color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights: true" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false" stats antialias="true">
    <div id="loadingOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
        <p style="color: white; font-size: 1.5em; text-align: center;">Tocca per Avviare l'AR</p>
        <button id="startButton" style="padding: 15px 30px; font-size: 1.2em; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">Avvia AR</button>
    </div>

      <a-assets>
          <a-asset-item id="myTarget" src="./targets.mind"></a-asset-item>
      </a-assets>

      <a-entity mindar-image-system="imageTargetSrc: #myTarget; showStats: false; autoStart: false; warmupTolerance: 10; missTolerance: 10; maxTrack: 3;">
                                                                ^ questo

          <a-entity mindar-image-target="targetIndex: 0">
              <a-box position="0 0.5 0" rotation="0 45 0" color="red"></a-box>
              <a-text value="Cubo Rosso!" position="0 1.2 0" align="center" width="2" color="#FFF"></a-text>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 1">
              <a-sphere position="0 0.5 0" radius="0.5" color="blue"></a-sphere>
              <a-text value="Sfera Blu!" position="0 1.2 0" align="center" width="2" color="#FFF"></a-text>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 2">
              <a-cylinder position="0 0.5 0" radius="0.5" height="1" color="green"></a-cylinder>
              <a-text value="Cilindro Verde!" position="0 1.2 0" align="center" width="2" color="#FFF"></a-text>
          </a-entity>

          </a-entity>

      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>